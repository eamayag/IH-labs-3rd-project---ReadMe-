{"ast":null,"code":"import _classCallCheck from \"/home/esperanza/code/WEBDEV/8th week/ReadMe - project/front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/esperanza/code/WEBDEV/8th week/ReadMe - project/front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/esperanza/code/WEBDEV/8th week/ReadMe - project/front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/esperanza/code/WEBDEV/8th week/ReadMe - project/front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/esperanza/code/WEBDEV/8th week/ReadMe - project/front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/esperanza/code/WEBDEV/8th week/ReadMe - project/front/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport { Switch, Route } from 'react-router-dom';\nimport Navbar from './components/navbar/Navbar';\nimport Signup from './components/auth/Signup';\nimport Login from './components/auth/Login';\nimport AuthService from './components/auth/AuthService';\nimport Profile from './components/content/Profile';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.getTheUser = function (userObj) {\n      _this.setState({\n        loggedInUser: userObj\n      });\n    };\n\n    _this.logout = function () {\n      _this.service.logout().then(function () {\n        _this.setState({\n          loggedInUser: null\n        });\n      });\n    };\n\n    _this.state = {\n      loggedInUser: null\n    };\n    _this.service = new AuthService();\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"fetchUser\",\n    value: function fetchUser() {\n      var _this2 = this;\n\n      if (this.state.loggedInUser === null) {\n        this.service.loggedin().then(function (response) {\n          _this2.setState({\n            loggedInUser: response\n          });\n        }).catch(function (err) {\n          _this2.setState({\n            loggedInUser: false\n          });\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      this.fetchUser(); //pendiente refactorizar, no consigo separar en un único return\n      //pendiente incluir redirect a profile, cambio de rutas\n\n      if (this.state.loggedInUser) {\n        return React.createElement(\"div\", {\n          className: \"App\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53\n          },\n          __self: this\n        }, React.createElement(\"header\", {\n          className: \"App-header\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54\n          },\n          __self: this\n        }, React.createElement(Navbar, {\n          userInSession: this.state.loggedInUser,\n          logout: this.logout,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55\n          },\n          __self: this\n        }), React.createElement(Switch, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56\n          },\n          __self: this\n        }, React.createElement(Route, {\n          exact: true,\n          path: \"/profile\",\n          render: function render() {\n            return React.createElement(Profile, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 57\n              },\n              __self: this\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }))));\n      } else {\n        return React.createElement(\"div\", {\n          className: \"App\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64\n          },\n          __self: this\n        }, React.createElement(\"header\", {\n          className: \"App-header\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65\n          },\n          __self: this\n        }, React.createElement(Navbar, {\n          userInSession: this.state.loggedInUser,\n          logout: this.logout,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }), React.createElement(Switch, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }, React.createElement(Route, {\n          exact: true,\n          path: \"/signup\",\n          render: function render() {\n            return React.createElement(Signup, {\n              getUser: _this3.getTheUser,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 68\n              },\n              __self: this\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68\n          },\n          __self: this\n        }), React.createElement(Route, {\n          exact: true,\n          path: \"/login\",\n          render: function render() {\n            return React.createElement(Login, {\n              getUser: _this3.getTheUser,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 69\n              },\n              __self: this\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        }))));\n      }\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/home/esperanza/code/WEBDEV/8th week/ReadMe - project/front/src/App.js"],"names":["React","Component","Switch","Route","Navbar","Signup","Login","AuthService","Profile","App","props","getTheUser","userObj","setState","loggedInUser","logout","service","then","state","loggedin","response","catch","err","fetchUser"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport { Switch, Route } from 'react-router-dom';\nimport Navbar from './components/navbar/Navbar';\nimport Signup from './components/auth/Signup';\nimport Login from './components/auth/Login';\nimport AuthService from './components/auth/AuthService';\nimport Profile from './components/content/Profile';\n\nclass App extends Component {\n  constructor(props){\n    super(props)\n    this.state = { loggedInUser: null };\n    this.service = new AuthService();\n  }\n\n  getTheUser= (userObj) => {\n    this.setState({\n      loggedInUser: userObj\n    })\n  }\n\n  logout = () => {\n    this.service.logout()\n    .then(() => {\n      this.setState({ loggedInUser: null });\n    })\n  }\n\n  fetchUser(){\n    if( this.state.loggedInUser === null ){\n      this.service.loggedin()\n      .then(response =>{\n        this.setState({\n          loggedInUser:  response\n        }) \n      })\n      .catch( err =>{\n        this.setState({\n          loggedInUser:  false\n        }) \n      })\n    }\n  }\n\n  render() {\n    this.fetchUser()\n    //pendiente refactorizar, no consigo separar en un único return\n    //pendiente incluir redirect a profile, cambio de rutas\n    \n    if(this.state.loggedInUser){\n      return (\n        <div className=\"App\">\n          <header className=\"App-header\">\n            <Navbar userInSession={this.state.loggedInUser} logout={this.logout} />\n            <Switch>\n              <Route exact path=\"/profile\" render={() => <Profile />} />\n            </Switch>\n          </header>\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"App\">\n          <header className=\"App-header\">\n            <Navbar userInSession={this.state.loggedInUser} logout={this.logout} />\n            <Switch>\n              <Route exact path='/signup' render={() => <Signup getUser={this.getTheUser}/>}/>\n              <Route exact path='/login' render={() => <Login getUser={this.getTheUser}/>}/>\n            </Switch>\n          </header>\n        </div>\n      );\n    }\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}